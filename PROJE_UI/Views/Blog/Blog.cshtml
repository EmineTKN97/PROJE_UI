@using PROJE_UI.Models
@model Blog;
{<style>
     main {
         display: flex;
         align-items: center;
         justify-content: center;
         height: 100vh;
     }

     .rounded-form-container {
         border: 1px solid #ccc;
         border-radius: 10px;
         padding: 20px;
         width: 700px;
     }
</style>
}<main id="main">
    <div class="rounded-form-container">
        <center><h1 class="text-danger">BLOG YAZISI EKLE</h1></center>
        <form class="position-sticky" method="post" action="/Blog/Blog">
            <div class="mb-3">
                <label for="Title" class="form-label">Blog Başlığı:</label>
                <input type="text" class="form-control" id="Title" name="Title">
            </div>
            <div class="mb-3">
                <label for="İmagePath" class="form-label">Resim Ekle</label>
                <input class="form-control" type="file" id="İmagePath">
            </div>
            <div class="mb-3">
                <label for="Description" class="form-label">Blog Yazısı:</label>
                <textarea class="form-control" id="Description" rows="15"></textarea>
            </div>
            <center><button type="submit" class="btn btn-danger">Bloğu Kaydet</button></center>
        </form>
    </div>
</main>
@section script
{
<script>
    const addBlog = async (token, blogData) => {
        try {
            const response = await fetch('https://localhost:7185/api/Blogs/AddBlog', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`,
                },
                body: JSON.stringify(blogData),
            });

            if (response.ok) {
                const addedBlog = await response.json();
                console.log('Added Blog:', addedBlog);
                // Başarılı bir şekilde blog eklendikten sonra yapılacak işlemleri buraya ekleyebilirsiniz
            } else {
                // Hata durumlarıyla başa çıkın
                console.error('Failed to add blog');
            }
        } catch (error) {
            console.error('Error:', error);
        }
    };

    // Örnek bir blog verisi
    const blogData = {
        title: 'Yeni Blog Başlığı',
        content: 'Yeni Blog İçeriği',
        // Diğer blog özelliklerini buraya ekleyebilirsiniz
    };

    // Örnek bir token
    const token = localStorage.getItem('token');

    // Token varsa ve blogData da gerekli bilgileri içeriyorsa blog ekleyebiliriz
    if (token && blogData.title && blogData.content) {
        addBlog(token, blogData);
    }
</script>
}
